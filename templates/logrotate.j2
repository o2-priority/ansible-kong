{{ kong_log_dir }}/*.log {
    {{ kong_logrotate_frequency|default('weekly') }}
    rotate {{ kong_logrotate_rotate|default(0) }}
    missingok
    maxsize {{ kong_logrotate_maxsize|default('100M') }}
    nodateext
    notifempty
    sharedscripts
    compress
    postrotate
        /bin/logger -t logrotate "kong postrotate v1";
        systemctl restart filebeat;
        [ ! -f /usr/local/kong/pids/nginx.pid ] || kill -USR1 $(cat /usr/local/kong/pids/nginx.pid)
    endscript
}
